<?php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Input\InputArgument;

class RemoveEvergreenDuplicateCustomer extends Command {
 	/**
	 * The console command name.
	 *
	 * @var string
	 */
	protected $name = 'command:remove-evergreen-duplicate-customer';
 	/**
	 * The console command description.
	 *
	 * @var string
	 */
	protected $description = 'Remove evergreen duplicate customer.';
 	/**
	 * Create a new command instance.
	 *
	 * @return void
	 */
	public function __construct()
	{
		parent::__construct();
	}
 	/**
	 * Execute the console command.
	 *
	 * @return mixed
	 */
	public function handle()
	{
		
		do {
			$ids = [471338, 471040, 471017, 471386, 471094, 471162, 471346, 471037, 471302, 471194, 471226, 471072, 471158, 471126, 470957, 470985, 471050, 471007, 471150, 471106, 471254, 471312, 471124, 471262, 471306, 471364, 401961, 471310, 471182, 471148, 471033, 471382, 403288, 401941, 471176, 471120, 471068, 470967, 471287, 471114, 471220, 471248, 471152, 471060, 471029, 471013, 470991, 471104, 471198, 402069, 471001, 471380, 471336, 471056, 471354, 471174, 471078, 471322, 471230, 471098, 471172, 471218, 470979, 471027, 471076, 471031, 471021, 471238, 471087, 471042, 471102, 471326, 471180, 471089, 471025, 471240, 471370, 471009, 471270, 470961, 471044, 470981, 470971, 471074, 471362, 471015, 471196, 471130, 471132, 471005, 471216, 471003, 471202, 471324, 471283, 471035, 471274, 471334, 471228, 471314, 471350, 471204, 471242, 471154, 471160, 471110, 471108, 471236, 471023, 471080, 471166, 401962, 402035, 402007, 471246, 471170, 471214, 471118, 471366, 471293, 403280, 471100, 471332, 471212, 471342, 471295, 471234, 470969, 470975, 471224, 471244, 471256, 471144, 471260, 471210, 471358, 471328, 471348, 402064, 471019, 471112, 470959, 471096, 470973, 471054, 471146, 471046, 471250, 471352, 470983, 470999, 471268, 401976, 471064, 471258, 471066, 470965, 471318, 471360, 471052, 471048, 471232, 471289, 471276, 470995, 471128, 471138, 471085, 401995, 471340, 471252, 471297, 471344, 470748, 471368, 471384, 470963, 471304, 471116, 471208, 471264, 471316, 470977, 471200, 471168, 471186, 471330, 401971, 471300, 471142, 471308, 471188, 471190, 471378, 471136, 471291, 471192, 470987, 471206, 471070, 470989, 402018, 471376, 471058, 471164, 470955, 470993, 470997, 471062, 471178, 471082, 471184, 471134, 471122, 471156, 471092, 471011, 471374, 471266, 471280, 471272, 471140, 471222, 471285, 471278, 471356, 471320];
			$customers = Customer::whereIn('id', $ids)
				->chunk(20, function ($customers) {
					$customerIds = $customers->pluck('id')->toArray();
					DB::Table('customers')->wherein('id', $customerIds)
						->update([
							'deleted_at' => '2019-02-18 00:00:00',
							'deleted_by' => 8170,
						]);
				});
			$customers = Customer::whereIn('id', $ids)->count();
		} while ($customers);
	}
 }